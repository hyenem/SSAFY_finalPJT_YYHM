<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.healog.mvc.diary.model.dao.ExerciseDao">

    <!-- 운동 조회 -->
    <select id="findExercisesByUserId" resultType="ExerciseDto">
        SELECT e.*
        FROM exercise e
        JOIN diary d ON e.diary_id = d.id
        WHERE d.user_id = #{userId}
    </select>

    <!-- 운동 추가 -->
    <insert id="insertExercise">
        INSERT INTO exercise (category_id, diary_id, weight, count, `set`, posture_img, done)
        VALUES (#{categoryId}, #{diaryId}, #{weight}, #{count}, #{set}, #{postureImg}, #{done})
    </insert>

    <!-- 운동 수정 -->
    <update id="updateExercise">
        UPDATE exercise
        SET weight = #{weight}, count = #{count}, `set` = #{set}, posture_img = #{postureImg}, done = #{done}
        WHERE id = #{id}
    </update>

    <!-- 운동 삭제 -->
    <delete id="deleteExercise">
        DELETE FROM exercise WHERE id = #{id}
    </delete>

</mapper>
